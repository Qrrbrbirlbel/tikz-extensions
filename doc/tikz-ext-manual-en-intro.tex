% !TeX spellcheck = en_US
% !TeX root = tikz-ext-manual.tex
% Copyright 2022 by Qrrbrbirlbel
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Free Documentation License.
%
\part{Introduction}
\begin{multicols}{2}
\section{Usage}
This package is called |tikz-ext|, however,
one can't load it via |\usepackage|.%
\footnote{Except for \texttt{pgfcalendar-ext} and \texttt{pgffor-ext}.}
Instead, this package consists mostly of
\pgfname\space and \tikzname\space libraries
which are loaded by either |\usepgflibrary| or |\usetikzlibrary|.

\section{Why do we need it?}
Since I have been answering questions on
\hyperlink{https://tex.stackexchange.com}{TeX.sx}
I've noticed that some questions come up again and again,
every time with a slightly different approach on how to solve them.

I don't like reinventing the wheel which is why I've gathered
the solutions of my answers in this package.

\section{Having problems?}
Note however, that most of these extensions haven't been
stress-tested properly and might be considered
experimental.

Don't hesitate to open an issue on GitHub.
You probably found a bug.

\newcolumn
\section{Namespaces and \tikzextname\ macros}
Since some parts of this package have existed in some form since 2013,
the choice for key names and in which \pgfname keys namespace they reside
is not always optimal.
They often reside in the main |/tikz| or |/pgf| path.
Similar applies to macro names.

For future versions,
it is planned to move those in the |/tikz/ext| namespace.
For keys in the |/pgf| namespace, this will probably not happen
since it makes it not very intuitive to use them in \tikzname.

Starting from version 0.6,
\tikzextname\ provides commands that return the current version for compatibility testing.
The second simply increments with every release
so that the first doesn't need to be parsed.
\begin{command}{\tikzextversion}
  Returns \texttt{\tikzextversion}.
\end{command}
\begin{command}{\tikzextversionnumber}
  Returns \texttt{\tikzextversionnumber}.
\end{command}

Also starting from version 0.6, there's \texttt{\textbackslash tikzextset}.
\begin{command}{\tikzextset\marg{options}}
  This command will process the \meta{options} using the
  |\pgfkeys| command with the default path set to |/tikz/ext|.
\end{command}

\newcolumn
\section{Compatibility with older versions}
As discussed in the previous section,
keys and commands of extensions that existed before version~0.6
that do not appear in this manual are considered deprecated.

\begin{key}{/tikz/ext/compat=\mchoice{pre 0.6, 0.6, newest} (default pre 0.6)}
  This sets the global compatibility setting for every extension of this package
  (whether already loaded or not).

  The following table shows the compatibility settings for each extension.
  \newcommand*\X{$\checkmark$}%
  \newcommand*\Xdef{\X\kern-.65em\X}%
  A \X\ denotes an available setting where \Xdef\ denotes the default compatibility setting.
  \newcommand*\tabHeader[1]{\rotatebox{90}{#1}}
  \begin{center}
  \begin{tabular}{>{\ttfamily ext.}l ccc}
    \toprule
    \multicolumn{1}{l}{Extension} & pre 0.6 & 0.6 & newest \\ \midrule
    nodes                         & \Xdef   & --  &   --   \\
    scalepicture                  & \Xdef   & --  &   --   \\
    transformations.mirror        & \Xdef   & --  &   --   \\ \bottomrule
  \end{tabular}
  \end{center}
\end{key}

\newcolumn
For each available extension the compatibility setting can be adjusted as well
after the extension is loaded.
\begin{keylist}[/tikz/ext/compat]{%
  scalepicture=\meta{version} (default pre 0.6),
  transformations.mirror=\meta{version} (default pre 0.6)}
  It should be noted that at this point, a compatibility setting can be reversed
  since they only forward argument from an old key or command to the new version.
  
  The changes are as follows.
  \begin{description}
  \item[pre 0.6] This version is different than the newest.
    \begin{description}
    \item[|scalepicture|] The keys are in the |/tikz| name space instead of the |/tikz/ext| namespace.
    \item[|transformations.mirror|]
      The keys are in the |/tikz| name space instead of the |/tikz/ext| namespace.
      The commands of the \pgfname\ library start with |\pgf| instead of |\pgfext|.
    \end{description}
  \item[0.6] No compatibility changes. This version is the same as |newest|.
  \item[newest] No compatibility changes.
  \end{description}
\end{keylist}
\end{multicols}