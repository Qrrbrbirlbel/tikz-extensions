% Copyright 2024 by Qrrbrbirlbel
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Free Documentation License.
%

\def\tikzextversion{0.6}
\def\tikzextversionnumber{8}
\def\tikzextset{\pgfqkeys{/tikz/ext}}

\def\tikzextutil@compatwarning@cmd#1#2#3#4#5{%
  \pgfutil@IfUndefined{#3}{%
    \pgfutil@namedef{#3}{%
      \pgfutil@packagewarning{tikz-ext}{%
        The deprecated command \expandafter\pgfutil@gobble\string\\#3 was used. It is now \string#4. Please use that instead.^^J%
        To remove this warning use \string\tikzextset\string{compat/#1 = #2\string}.^^J%
        This warning will be removed in the next version and the command \string#3 will fail.^^J%
      }%
      #4%
    }%
  }{}%
}
\def\tikzextutil@compatwarning@key#1#2#3{%
  \pgfutil@ifnextchar[%
    {\tikzextutil@compatwarning@key@opt{#1}{#2}{#3}}%
    {\tikzextutil@compatwarning@key@   {#1}{#2}{#3}{}}%
}
\def\tikzextutil@compatwarning@key@opt#1#2#3[#4]{%
  \tikzextutil@compatwarning@key@{#1}{#2}{#3}{\pgfkeyssetvalue{#3/.@def}{#4}}%
}
\def\tikzextutil@compatwarning@key@#1#2#3#4#5{%
  \pgfkeys@pathtoks{#3}%
  \pgfkeysifdefined{#3}{%
    % The key is a value key. Do not overwrite or adjust.
    % Old TikZ-Ext key simply will not work.
  }{%
    \pgfkeysifdefined{#3/.@cmd}{%
      % The key is a code key. Do not overwrite or adjust.
      % Old TikZ-Ext key simply will not work.
    }{%
      % The key is currently not used.
      #4%
      \pgfkeysdef{#3}{%
        \pgfutil@packagewarning{tikz-ext}{%
          The deprecated key '#3' was used. It is now '#5'. Please use that instead.^^J%
          To remove this warning use \string\tikzextset\string{compat/#1 = #2\string}.^^J%
          This warning will be removed in the next version and the key '#3' will fail.^^J%
        }%
        \pgfkeysvalueof{#5/.@cmd}##1\pgfeov
      }%
    }
  }
}
\tikzextset{
  tikz/.code=\tikzset{#1},
  pgf/.code=\pgfset{#1},
  .code=\tikzextset{#1},
  %
  compat/.is choice, compat/.default=warn,
  /tikz-ext/compat/add library/.code 2 args={%
    \tikzextset{compat/#1/.is choice, compat/#1/.default=#2}%
    \pgfutil@for\tikzext@temp:=pre 0.6,0.6,newest,warn\do{%
      \pgfkeys@expanded{%
        \noexpand\tikzextset{%
          compat/\tikzext@temp/.append style=%
            /tikz/ext/compat/#1/\tikzext@temp}}%
      \pgfkeysedef
        {/tikz/ext/compat/#1/\tikzext@temp}
        {\noexpand\pgfkeyssetvalue{/tikz/ext/compat/#1}{\tikzext@temp}}%
    }%
  }
}
\pgfutil@for\tikzext@temp:=pre 0.6,0.6,newest,warn\do{%
  \pgfkeysedef{/tikz/ext/compat/\tikzext@temp}{%
    \noexpand\pgfkeyssetvalue{/tikz/ext/compat/arrows}                {\tikzext@temp}%
    \noexpand\pgfkeyssetvalue{/tikz/ext/compat/nodes}                 {\tikzext@temp}%
    \noexpand\pgfkeyssetvalue{/tikz/ext/compat/scalepicture}          {\tikzext@temp}%
    \noexpand\pgfkeyssetvalue{/tikz/ext/compat/transformations.mirror}{\tikzext@temp}%
  }%
}
\tikzextset{compat=warn}
\endinput
